# 128. Longest Consecutive Sequence

- **é›£åº¦**: Medium
- **ä¸»é¡Œ**: Array, Hash Table, Union-Find
- **é€£çµ**: [LeetCode Link](https://leetcode.com/problems/longest-consecutive-sequence/)

## ğŸ’¡ è§£é¡Œé‚è¼¯ (HashSet & Intelligent Sequence Building)

é¡Œç›®è¦æ±‚åœ¨æœªæ’åºçš„é™£åˆ—ä¸­æ‰¾å‡ºæœ€é•·çš„é€£çºŒæ•¸å­—åºåˆ—é•·åº¦ï¼Œä¸”**æ™‚é–“è¤‡é›œåº¦å¿…é ˆç‚º $O(n)$**ã€‚é€™æ„å‘³è‘—æˆ‘å€‘ä¸èƒ½ä½¿ç”¨æ’åºæ¼”ç®—æ³•ï¼ˆå› ç‚ºæ’åºè‡³å°‘éœ€è¦ $O(n \log n)$ï¼‰ã€‚

### æ ¸å¿ƒç­–ç•¥ï¼šå°‹æ‰¾ã€Œèµ·é»ã€(Find the Start)
1.  **è³‡æ–™çµæ§‹**ï¼šå°‡æ‰€æœ‰æ•¸å­—æ”¾å…¥ `unordered_set`ã€‚é€™æœ‰å…©å€‹å¥½è™•ï¼š
    * å»é™¤é‡è¤‡æ•¸å­—ã€‚
    * æä¾› $O(1)$ çš„å¿«é€ŸæŸ¥è©¢èƒ½åŠ›ã€‚
2.  **è¾¨è­˜èµ·é»**ï¼šéæ­· Set ä¸­çš„æ¯å€‹æ•¸å­— `num`ã€‚
    * å¦‚æœ `num - 1` **ä¸å­˜åœ¨**æ–¼ Set ä¸­ï¼Œä»£è¡¨ `num` æ˜¯æŸå€‹é€£çºŒåºåˆ—çš„**é–‹é ­ (Start)**ã€‚
    * å¦‚æœ `num - 1` **å­˜åœ¨**ï¼Œä»£è¡¨ `num` åªæ˜¯åºåˆ—çš„ä¸­é–“éƒ¨åˆ†ï¼Œç›´æ¥è·³éï¼ˆå› ç‚ºæˆ‘å€‘æœƒå¾å®ƒçš„é ­é–‹å§‹æ•¸ï¼Œä¸ç”¨é‡è¤‡åšå·¥ï¼‰ã€‚
3.  **è¨ˆç®—é•·åº¦**ï¼šä¸€æ—¦æ‰¾åˆ°èµ·é»ï¼Œå°±ç”¨ `while` è¿´åœˆä¸æ–·æª¢æŸ¥ `num + 1` æ˜¯å¦å­˜åœ¨ï¼Œç›´åˆ°åºåˆ—ä¸­æ–·ï¼Œä¸¦æ›´æ–°æœ€å¤§é•·åº¦ `longest`ã€‚

## â­ï¸ è¤‡é›œåº¦åˆ†æ

- **æ™‚é–“è¤‡é›œåº¦**: $O(n)$
    * é›–ç„¶ç¨‹å¼ç¢¼ä¸­æœ‰ `for` è¿´åœˆåŒ…è‘— `while` è¿´åœˆï¼Œä½†æ¯å€‹æ•¸å­—**æœ€å¤šåªæœƒè¢«è¨ªå•å…©æ¬¡**ï¼š
        1.  ç¬¬ä¸€æ¬¡æ˜¯åœ¨ `for` è¿´åœˆä¸­æª¢æŸ¥æ˜¯å¦ç‚ºèµ·é»ã€‚
        2.  ç¬¬äºŒæ¬¡æ˜¯åœ¨å®ƒæ˜¯åºåˆ—ä¸€éƒ¨åˆ†æ™‚ï¼Œè¢« `while` è¿´åœˆæ•¸åˆ°ã€‚
    * å› æ­¤ç¸½æ“ä½œæ¬¡æ•¸ç´„ç‚º $2n$ï¼Œå³ $O(n)$ã€‚
- **ç©ºé–“è¤‡é›œåº¦**: $O(n)$
    * éœ€è¦ä¸€å€‹ `unordered_set` ä¾†å„²å­˜é™£åˆ—ä¸­çš„æ‰€æœ‰æ•¸å­—ã€‚

## ğŸ’» Code (C++)

```cpp
#include <vector>
#include <unordered_set>
#include <algorithm> // for max

using namespace std;

class Solution {
public:
    int longestConsecutive(vector<int>& nums) {
        // 1. æŠŠæ‰€æœ‰æ•¸å­—ä¸Ÿé€² unordered_set (å»é‡ + O(1)æŸ¥è©¢)
        unordered_set<int> s(nums.begin(), nums.end());

        int longest = 0;

        // 2. éæ­· set è£¡é¢çš„æ¯å€‹æ•¸å­—
        for(int n : s){
            // 3. åˆ¤æ–·èµ·é»ï¼šè‹¥å‰ä¸€æ•¸å­— (n-1) ä¸å­˜åœ¨ï¼Œä»£è¡¨ n æ˜¯åºåˆ—çš„é ­
            // é€™æ˜¯ç¢ºä¿ O(n) çš„é—œéµï¼Œé¿å…é‡è¤‡è¨ˆç®—åŒä¸€æ®µåºåˆ—
            if(!s.count(n-1)){
                int current = n;
                int len = 1;

                // 4. ä¸€ç›´å¾€å¾Œæ‰¾æ¥ä¸‹ä¾†çš„æ•¸å­— (n+1, n+2...)
                while(s.count(current + 1)){
                    current++;
                    len++;
                }

                // 5. æ›´æ–°æœ€å¤§é•·åº¦
                longest = max(longest, len);
            }
        }
        return longest;
    }
};